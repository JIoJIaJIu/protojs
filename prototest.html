<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Protobuf test</title>
  <script src="protobuf.js" type="text/javascript"></script>
  <script src="Sirikata.pbj.js" type="text/javascript"></script>
  <script type="text/javascript">
// <![CDATA[
  function parsejson(text) {
     return !(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(
             text.replace(/"(\\.|[^"\\])*"/g, ''))) &&
         eval('(' + text + ')');
  }
  function sendMessage(textinput) {
    var output = encode(parsejson(textinput));
    return output;
  }
// ]]>
  </script>
</head>
<body>
<form onsubmit="document.getElementById('output').value = sendMessage(document.getElementById('input').value); return false;" action="">
<div>
  <textarea id="input" cols="80" rows="10"></textarea><br />
  <input id="btn" type="submit" /><br />
  <input id="output" type="text" value="" /><br />
</div>
</form>
</body>
</html>

